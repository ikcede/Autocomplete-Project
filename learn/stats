Stats:

A Tale of Two Cities

With all words: 

tf gives: 3.148977421389
with trie computation time is 341.03048396111s or about 5 min

3.1450527524447 without trie in time 563.56813597679s which is much worse


Now we split into 10 chunks:

2.9746693983982,2928
2.9413744740533,2682
2.950678060561,2879
2.9199726402189,2595
2.9073297941697,2760
3.0030171600981,2774
2.963484708063,2847
2.969481180061,2720
2.920193236715,2563
2.9575095057034,2522

78.048281908035

25 chunks

2.8081906524757,1557
2.8688716866057,1578
2.7309417040359,1260
2.8453512636216,1584
2.8382968822708,1361
2.7892882311487,1476
2.8749132947977,1529
2.73191290096,1431
2.8102738066392,1411
2.8072139303483,1322
2.8080784496848,1532
2.748031496063,1432
2.8111739745403,1332
2.8594634506522,1358
2.8363759296822,1518
2.830969541967,1568
2.8832099907493,1496
2.8011520737327,1468
2.8475844862781,1502
2.8321116103098,1402
2.7994722955145,1439
2.7634567901235,1335
2.8152277039848,1356
2.8295238095238,1383
2.7685950413223,1395

32.60638999939

And now 50 chunks:

2.6692913385827,946
2.7147480351364,936
2.7190957190957,876
2.7582417582418,1005
2.6767301439851,849
2.6122840690979,736
2.7750689972401,958
2.7283777466106,942
2.7057728119181,829
2.7548837209302,870
2.651493598862,863
2.6880819366853,920
2.7160319699107,851
2.73703366697,966
2.6021062271062,868
2.6387158600862,861
2.6743421052632,930
2.704352176088,771
2.7148614609572,787
2.7164619164619,816
2.7448180561953,957
2.6486742424242,886
2.68684569868,906
2.6044318717586,833
2.6619850187266,830
2.7113010446344,827
2.7611336032389,788
2.7010062290369,871
2.7239676840215,934
2.701674966048,919
2.6974752028855,992
2.7388382141143,869
2.7235996326905,898
2.7618825722274,934
2.6748267898383,863
2.7066666666667,929
2.6486609169315,914
2.7547597461469,924
2.6447858472998,874
2.7741470446901,862
2.6904761904762,828
2.6432884347422,886
2.6852216748768,854
2.6564356435644,824
2.670107930549,827
2.778896882494,856
2.7318702290076,810
2.6402091254753,865
2.5833724753405,809
2.7174738841406,883

17.056282997131

Number of unique words on the right

Keeping in mind that 
// Tale of two cities has 135751 words total
// print_r($parser->data);
// 10898 unique words

We see that with more words, tf gets worse
Note that if we average these values we can plot them on a curve

Now let's do tf-idf with 10 chunks as "documents" of the whole. This could take many minutes

3.0075285451197
in 201.48575901985

Now 25 chunks
3.1311602209945
in 247.80545306206

Now 50 chunks
3.3046187845304
in 256.21030497551


And finally bigram gives: 

1.846509709167
with 68247 bigrams

This page was created in 361.01916003227 seconds

Which is a significant improvement, but depends on previous word

for 10 chunks:
1.5454947321889,9874
1.5502836513667,9587
1.5342223532012,9838
1.5118986222648,9353
1.5337802991233,9769
1.5344433802402,9709
1.5555146246224,9836
1.5575775436528,9866
1.5465998673838,9502
1.5421793266043,9575

This page was created in 49.81237912178 seconds

for 25 chunks
1.4349668386146,4257
1.415622697126,4373
1.4054900515844,4046
1.4180176860722,4354
1.4191230655859,4166
1.3931466470155,4284
1.4132277081798,4339
1.4143330876934,4174
1.4032792925571,4209
1.3876197494473,4057
1.4180176860722,4316
1.3922254974208,4242
1.4113854089904,4155
1.4073323507738,4170
1.4211495946942,4264
1.4202284450995,4369
1.4288872512896,4286
1.4423360353721,4288
1.4591009579956,4310
1.3979366249079,4307
1.4060427413412,4217
1.4299926308032,4124
1.4395725865881,4279
1.4008843036109,4195
1.4134119380987,4243


This page was created in 28.54810500145 seconds

for 50 chunks

1.3553262071508,2234
1.3453741245853,2260
1.325838555105,2245
1.3324732768153,2330
1.3114633247328,2229
1.3295245116108,2107
1.3243641725028,2301
1.3295245116108,2278
1.3601179506082,2176
1.3103575377811,2265
1.3048286030225,2244
1.3085145595282,2270
1.3092517508293,2239
1.3494286767416,2311
1.3656468853668,2211
1.3004054552156,2203
1.3085145595282,2241
1.333579063767,2191
1.2989310726133,2126
1.2967194987099,2193
1.3317360855142,2316
1.3232583855511,2221
1.325838555105,2228
1.2922963509031,2238
1.328418724659,2226
1.3169922594913,2171
1.3114633247328,2151
1.3092517508293,2271
1.3110947290822,2243
1.3357906376705,2253
1.3409509767785,2323
1.3133063029856,2243
1.3435311463325,2273
1.3251013638039,2264
1.3350534463693,2241
1.3663840766679,2286
1.3564319941025,2310
1.3704386288242,2234
1.2948765204571,2287
1.3217840029488,2261
1.3166236638408,2217
1.3265757464062,2211
1.3328418724659,2212
1.3494286767416,2215
1.328418724659,2256
1.3560633984519,2309
1.3317360855142,2231
1.3000368595651,2212
1.3129377073351,2170
1.3372650202728,2304


This page was created in 13.628733158112 seconds

------------------

Ny times articles

1. tf gives: 2.7423312883436 in 0.41695284843445s

With trie gives 2.7556237218814 in 0.098503828048706s

2. tf gives: 2.4792079207921 in 0.15243697166443s 

2.4475247524752 in 0.049300909042358s with trie

In that case we will use the trie

Both: tf gives: 2.8482805124747 

tf-idf gives: 2.6585100598151